<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>for문 실습</title>
<style>
table {
	width : 100%;
	border: 1px solid black;
}

th, td {
	border: 1px solid #000;
	text-align: center;
}
</style>
</head>
<body>
<button id="btn1">각 과목 평균 구하기</button>
<button id="btn2">학생 별 평균 구하기</button>
<button id="btn3">전체 학생 총 평균구하기 (숙제)</button>
<button id="btn4">평균보다 높으면 빨간색, 낮으면 파랑색 (숙제)</button>

<br>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="step1.js"></script>
<script>
/*
var tHeadArr = ["번호", "이름", "국어", "영어", "수학", "평균"];
var nameArr = ["Tom", "David", "Grace", "Michael", "Jeorge", "James", "Steve", "Sam", "John", "Sally"];
var korArr = [80, 90, 100, 50, 60 ,40 ,90 ,80 ,80 ,30];
var engArr = [50, 51, 52, 53, 54, 55, 56, 57, 58, 59];
var mathArr = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100];
*/
var isSubjectAvg = false;

function getSubjectAvg(arr) {

	var avg = 0;

	for(var i = 0; i < arr.length; i++) {
		avg += arr[i];
	}
	avg = Math.round(avg / arr.length);

	return avg;
}

$("#btn1").on("click", function(){
	isSubjectAvg = true;

	var korTD = $("#avg1");
	var engTD = $("#avg2");
	var mathTD = $("#avg3");

	korTD.text(getSubjectAvg(korArr));
	engTD.text(getSubjectAvg(engArr));
	mathTD.text(getSubjectAvg(mathArr));
});

$("#btn2").on("click", function(){
	var avg = 0;

	for(var i = 0; i < nameArr.length; i++){
		avg = korArr[i] + engArr[i] + mathArr[i];
		$("#std" + (i+1)).text(Math.round(avg / 3));
	}
});

$("#btn3").on("click", function(){

	if(isSubjectAvg == false){
		$("#btn1").click();
		$("#btn2").click();
	}

	var korAvgTD = $("#avg1");
	var engAvgTD = $("#avg2");
	var mathAvgTD = $("#avg3");
	var totalAvgTD = $("#avg4");

	var korAvgJumsu = Number(korAvgTD.text());
	var engAvgJumsu = Number(engAvgTD.text());
	var mathAvgJumsu = Number(mathAvgTD.text());
	totalAvgTD.text(Math.round((korAvgJumsu + engAvgJumsu + mathAvgJumsu) / 3));
});

function resultGoodorBad(num) {

	var subAvgTd = $("#avg" + (num - 2));
	var korAvgJumsu = Number(subAvgTd.text());
	var korTDList = $("table tbody tr td:nth-child(" + num + ")");

	for(var i = 0; i < korTDList.length; i++){
		var subTD = korTDList.eq(i)
		var subJumsu = Number(subTD.text());

		if(korAvgJumsu > subJumsu) {

			subTD.css("color","red");

		} else if(korAvgJumsu < subJumsu) {

			subTD.css("color","blue");

		}
	}
}

$("#btn4").on("click", function() {

	if(isSubjectAvg == false) {
		$("#btn3").click();
	}

	resultGoodorBad(3);
	resultGoodorBad(4);
	resultGoodorBad(5);
	resultGoodorBad(6);
});
</script>
</body>
</html>
